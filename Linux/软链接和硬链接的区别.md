# 软链接和硬链接的区别

> 浅谈linux中的硬链接和软链接文件以及ln的使用方法
> <https://blog.csdn.net/LEON1741/article/details/100136449>

## 总结

软链接：
   ln -s target link_name
   指向源文件或目录的路径引用，可以跨文件系统使用，但在源文件被删除时会成为无效链接，删除软链接不会影响源文件的存在
硬链接：
    ln target link_name
   对源数据的直接引用，共享相同的 inode 号码和数据，只能在同一文件系统内使用，删除任何一个硬链接不会影响文件的存在，除非所有链接都被删除

- 硬链接有相同的Inode，而软链接有不同的Inode
- 硬链接不能跨文件系统，而软链接可以
- 硬链接不能对目录使用，而软链接可以

## Inode 和 block

inode 是保存在磁盘分区中的文件的唯一编号，block负责存储实际的数据
[Linux文件系统-Inode-block](./Linux文件系统-Inode-block.md)

## 硬链接

Linux系统规定，可以允许多个文件名同时指向同一个索引节点（Inode），这就是硬链接

这样设计有一个好处就是，只要文件的索引节点还存在一个以上的链接，删除其中一个链接并不影响索引节点本身和其他的链接（也就是说该文件的实体并未删除），而只有当最后一个链接被删除后，且此时有新数据要存储到磁盘上，那么被删除的文件的数据块及目录的链接才会被释放，存储空间才会被新数据所覆盖。因此，该机制可以有效的防止误删操作。

## 软链接

软链接（符号链接）是一种特殊的文件，类似于Windows中的快捷方式，它指向另一个文件的路径名。
软链接文件有自己的 Inode，数据块，文件属性等信息，但是数据块中只保存它所指向文件的路径名，不依赖实际的存储位置
因此，软链接可以跨文件系统，而硬链接不能跨文件系统。
文件系统是指组织和管理文件和目录的结构，每个文件系统通常对应一个独立的存储卷或分区，例如一个硬盘分区、USB驱动器、网络存储设备等。

## GPT

在Linux文件系统中，**软链接**（symbolic link，也称符号链接）和**硬链接**（hard link）是两种不同的文件链接方式，它们各自有不同的用途和特性。

### 软链接 (Symbolic Link)

软链接类似于Windows中的快捷方式，它是一个指向另一个文件或目录的指针。

#### 特性

1. **文件类型**：软链接是一个独立的文件，指向另一个文件或目录。
2. **大小**：软链接的大小是其路径名的长度。
3. **删除原文件的影响**：如果原文件被删除，软链接会变成一个“悬空链接”（broken link），因为它指向的文件不再存在。
4. **跨文件系统**：软链接可以跨不同的文件系统。
5. **创建命令**：`ln -s target link_name`

#### 示例

假设我们有一个文件`file.txt`，我们可以创建一个指向它的软链接：

```bash
ln -s file.txt softlink.txt
```

`softlink.txt`就是一个指向`file.txt`的软链接。

### 硬链接 (Hard Link)

硬链接是指向文件数据的直接引用，与原文件共享相同的inode。

#### 特性

1. **文件类型**：硬链接与原文件没有区别，它们共享相同的inode。
2. **大小**：硬链接的大小与原文件相同。
3. **删除原文件的影响**：删除原文件不会影响硬链接，因为硬链接实际上是同一个文件。只有当所有的硬链接和原文件都删除后，数据才会被删除。
4. **不能跨文件系统**：硬链接必须在同一个文件系统中。
5. **创建命令**：`ln target link_name`

#### 示例

假设我们有一个文件`file.txt`，我们可以创建一个硬链接：

```bash
ln file.txt hardlink.txt
```

`file.txt`和`hardlink.txt`都是同一个文件的硬链接，它们共享相同的数据。

### 例子总结

假设我们有一个文件`example.txt`，我们可以创建软链接和硬链接来展示它们的区别：

1. 创建软链接：

```bash
ln -s example.txt example_softlink.txt
```

2. 创建硬链接：

```bash
ln example.txt example_hardlink.txt
```

- 删除`example.txt`后：
  - `example_softlink.txt`会成为悬空链接，无法再访问原始内容。
  - `example_hardlink.txt`仍然可以访问原始内容，因为硬链接共享相同的inode。

通过这两种链接方式，Linux提供了灵活的文件管理和引用方式，满足不同的需求。
