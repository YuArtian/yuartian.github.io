# eggjs 监控和内存泄漏案例分析
>
> EventHandle
> <https://help.aliyun.com/zh/nodejs/eventhandle?spm=a2c4g.11186623.0.0.147d77289CzAfm>

接入 Node.js 性能平台后，我们在全局告警中看到某个客户的应用频繁提醒堆内使用内存占据堆上限超过 80%，这种情况基本上大概率就是发生内存泄漏了，联系到对应的客户后，进过客户的授权，我们看到了有问题的进程内存状况，如下图所示：

利用堆快照分析
进一步根据引力图详细信息，可以看到内存堆积的引用文字关系

由于 client 是全局变量，此时用户每访问一次网站首页，都会给 client._events.error 对应的数组增加一个 error 处理函数，虽然每个 error 处理函数 26KB 左右，但是流量上来后，很容易累积触发 OOM
