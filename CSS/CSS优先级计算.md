# CSS选择器和优先级计算
>
> <https://developer.mozilla.org/zh-CN/docs/Web/CSS/CSS_Selectors#%E5%9F%BA%E6%9C%AC%E9%80%89%E6%8B%A9%E5%99%A8>

## CSS 选择器

- 通用选择器
  *
- 元素选择器
   h1
- 类选择器
   .classname
- ID选择器
   #id
- 属性选择器
   `[attr=value]`
- 伪类选择器
   :link, :visited, :hover, :active, :focus
- 伪元素选择器
   ::before, ::after
- 分组选择器
   h1, h2, h3
- 组合器
  - 后代选择器
     h1 em
  - 直接子代选择器
       ul > li
  - 相邻兄弟选择器

## 优先级计算

- 确定声明值
   确定元素的所有声明的值，如果没有冲突，就是最终的值，如果有冲突，就需要层叠解决

- 层叠冲突
  - 比较源的重要性
    整体来讲有三种来源：
    - 网页的作者可以定义文档的样式，这是最常见的样式表，称之为**页面作者样式**
    - 浏览器的用户，可以使用自定义样式表定制使用体验，称之为**用户样式**
    - 浏览器会有一个基本的样式表来给任何网页设置默认样式。这些样式统称**用户代理样式**
    对应的重要性顺序依次为：页面作者样式 > 用户样式 > 用户代理样式

  - **比较优先级**
     在同一个源中有样式声明冲突时，需要比较优先级
     <!-- 简单理解 -->
     !important > 内联样式 > ID选择器 > 类选择器，伪类，属性选择器 > 元素选择器，伪元素
    - 无视DOM树中的距离

    - 为目标元素直接添加样式，永远比继承样式的优先级高，无视优先级的遗传规则
    <!-- 具体规则 -->
      一个选择器的优先级可以说是由四个部分相加 (分量)，可以认为是个十百千 — 四位数的四个位数：

      千位： 如果声明在 style 的属性（内联样式）则该位得一分。这样的声明没有选择器，所以它得分总是1000
      百位： `ID 选择器` 则该位得一分
      十位： `类选择器`、`属性选择器`、`伪类` 则该位得一分
      个位： `元素`、`伪元素选择器` 则该位得一分

      注意：

    - 通用选择器 (*)，组合符 (+, >, ~, ' ')，和否定伪类 (:not) 不会影响优先级

    - 在进行计算时不允许进行进位，例如，20 个类选择器仅仅意味着 20 个十位，而不能视为 两个百位，也就是说，无论多少个类选择器的权重叠加，都不会超过一个 ID 选择器

    !important

      1. !important 可以覆盖以上所有优先级
      2. 如果同时有 !important，则依然对比优先级
         覆盖 !important 唯一的办法就是另一个 !important 具有 相同优先级 而且顺序靠后，或者更高优先级的选择器

- 比较次序
   样式声明既是同源，权重也相同，就需要比较次序，后面的样式会覆盖前面的样式
- 使用继承
   如果没有声明值，会优先使用继承值，继承值是从父元素继承的值
   可以继承的属性有：color, font-size, font-family, line-height, list-style, text-align, text-indent, text-decoration, text-transform, visibility 等
- 使用默认值
   如果没有继承值，会使用默认值，每个属性都有一个默认值
