(window.webpackJsonp=window.webpackJsonp||[]).push([[176],{547:function(e,r,a){"use strict";a.r(r);var t=a(45),o=Object(t.a)({},(function(){var e=this,r=e.$createElement,a=e._self._c||r;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"loader"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#loader"}},[e._v("#")]),e._v(" loader")]),e._v(" "),a("blockquote",[a("p",[e._v("https://webpack.docschina.org/api/loaders/")]),e._v(" "),a("p",[e._v("https://webpack.docschina.org/concepts/loaders/")]),e._v(" "),a("p",[e._v("https://juejin.im/post/5bc1a73df265da0a8d36b74f")])]),e._v(" "),a("p",[e._v("所谓 loader 只是一个导出为函数的 JavaScript 模块。"),a("a",{attrs:{href:"https://github.com/webpack/loader-runner",target:"_blank",rel:"noopener noreferrer"}},[e._v("loader runner"),a("OutboundLink")],1),e._v(" 会调用这个函数，然后把上一个 loader 产生的结果或者资源文件(resource file)传入进去。函数的 "),a("code",[e._v("this")]),e._v(" 上下文将由 webpack 填充，并且 "),a("a",{attrs:{href:"https://github.com/webpack/loader-runner",target:"_blank",rel:"noopener noreferrer"}},[e._v("loader runner"),a("OutboundLink")],1),e._v(" 具有一些有用方法，可以使 loader 改变为异步调用方式，或者获取 query 参数")]),e._v(" "),a("p",[e._v("第一个 loader 的传入参数只有一个：资源文件(resource file)的内容，content")]),e._v(" "),a("p",[e._v("compiler 需要得到最后一个 loader 产生的处理结果。这个处理结果应该是 "),a("code",[e._v("String")]),e._v(" 或者 "),a("code",[e._v("Buffer")]),e._v("（被转换为一个 string），代表了模块的 JavaScript 源码。另外还可以传递一个可选的 SourceMap 结果（格式为 JSON 对象）")]),e._v(" "),a("h2",{attrs:{id:"同步loader"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#同步loader"}},[e._v("#")]),e._v(" 同步loader")]),e._v(" "),a("p",[e._v("如果是单个处理结果，可以在"),a("strong",[e._v("同步模式")]),e._v("中直接返回。如果有多个处理结果，则必须调用 "),a("code",[e._v("this.callback()")])]),e._v(" "),a("p",[a("code",[e._v("this.callback")]),e._v(" 方法更灵活，因为它允许传递多个参数，而不仅仅是"),a("code",[e._v("content")])]),e._v(" "),a("h2",{attrs:{id:"异步loader"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#异步loader"}},[e._v("#")]),e._v(" 异步loader")]),e._v(" "),a("p",[e._v("在"),a("strong",[e._v("异步模式")]),e._v("中，必须调用 "),a("code",[e._v("this.async()")]),e._v("，来指示 "),a("a",{attrs:{href:"https://github.com/webpack/loader-runner",target:"_blank",rel:"noopener noreferrer"}},[e._v("loader runner"),a("OutboundLink")],1),e._v(" 等待异步结果，它会返回 "),a("code",[e._v("this.callback()")]),e._v(" 回调函数，随后 loader 必须返回 "),a("code",[e._v("undefined")]),e._v(" 并且调用该回调函数")]),e._v(" "),a("h2",{attrs:{id:"loader中的this"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#loader中的this"}},[e._v("#")]),e._v(" loader中的this")]),e._v(" "),a("p",[e._v("loader中的 "),a("code",[e._v("this")]),e._v(" 既不是webpack实例，也不是compiler、compilation、normalModule等这些实例。而是loader-runner构造的loaderContext对象，提供了各种loader API")]),e._v(" "),a("h2",{attrs:{id:"使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用"}},[e._v("#")]),e._v(" 使用")]),e._v(" "),a("p",[e._v("在你的应用程序中，有三种使用 loader 的方式：")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://webpack.docschina.org/concepts/loaders/#configuration",target:"_blank",rel:"noopener noreferrer"}},[e._v("配置"),a("OutboundLink")],1),e._v("（推荐）：在 "),a("strong",[e._v("webpack.config.js")]),e._v(" 文件中指定 loader")]),e._v(" "),a("li",[a("a",{attrs:{href:"https://webpack.docschina.org/concepts/loaders/#inline",target:"_blank",rel:"noopener noreferrer"}},[e._v("内联"),a("OutboundLink")],1),e._v("：在每个 "),a("code",[e._v("import")]),e._v(" 语句中显式指定 loader")]),e._v(" "),a("li",[a("a",{attrs:{href:"https://webpack.docschina.org/concepts/loaders/#cli",target:"_blank",rel:"noopener noreferrer"}},[e._v("CLI"),a("OutboundLink")],1),e._v("：在 shell 命令中指定它们")])])])}),[],!1,null,null,null);r.default=o.exports}}]);