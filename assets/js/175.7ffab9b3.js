(window.webpackJsonp=window.webpackJsonp||[]).push([[175],{538:function(e,v,_){"use strict";_.r(v);var o=_(45),c=Object(o.a)({},(function(){var e=this,v=e.$createElement,_=e._self._c||v;return _("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[_("h1",{attrs:{id:"webpack"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#webpack"}},[e._v("#")]),e._v(" Webpack")]),e._v(" "),_("blockquote",[_("p",[e._v("https://juejin.im/post/5dc01199f265da4d12067ebe")])]),e._v(" "),_("p",[_("strong",[e._v("Compiler")]),e._v("类("),_("code",[e._v("./lib/Compiler.js")]),e._v(")：webpack的主要引擎，在compiler对象记录了完整的webpack环境信息，在webpack从启动到结束，"),_("code",[e._v("compiler")]),e._v("只会生成一次。你可以在"),_("code",[e._v("compiler")]),e._v("对象上读取到"),_("code",[e._v("webpack config")]),e._v("信息，"),_("code",[e._v("outputPath")]),e._v("等")]),e._v(" "),_("p",[_("strong",[e._v("Compilation")]),e._v("类("),_("code",[e._v("./lib/Compilation.js")]),e._v(")：代表了一次单一的版本构建和生成资源。"),_("code",[e._v("compilation")]),e._v("编译作业可以多次执行，比如webpack工作在"),_("code",[e._v("watch")]),e._v("模式下，每次监测到源文件发生变化时，都会重新实例化一个"),_("code",[e._v("compilation")]),e._v("对象。一个"),_("code",[e._v("compilation")]),e._v("对象表现了当前的模块资源、编译生成资源、变化的文件、以及被跟踪依赖的状态信息")]),e._v(" "),_("p",[e._v("webpack 编译模块的基本流程：")]),e._v(" "),_("ol",[_("li",[e._v("调用"),_("code",[e._v("webpack")]),e._v("函数接收"),_("code",[e._v("config")]),e._v("配置信息，并初始化"),_("code",[e._v("compiler")]),e._v("，在此期间会"),_("code",[e._v("apply")]),e._v("所有 webpack 内置的插件;")]),e._v(" "),_("li",[e._v("调用"),_("code",[e._v("compiler.run")]),e._v("进入模块编译阶段；")]),e._v(" "),_("li",[e._v("每一次新的编译都会实例化一个"),_("code",[e._v("compilation")]),e._v("对象，记录本次编译的基本信息；")]),e._v(" "),_("li",[e._v("进入"),_("code",[e._v("make")]),e._v("阶段，即触发"),_("code",[e._v("compilation.hooks.make")]),e._v("钩子，从"),_("code",[e._v("entry")]),e._v("为入口：\n"),_("ol",[_("li",[e._v("调用合适的"),_("code",[e._v("loader")]),e._v("对模块源码预处理，转换为标准的JS模块；")]),e._v(" "),_("li",[e._v("调用第三方插件"),_("code",[e._v("acorn")]),e._v("对标准 JS 模块进行分析，收集模块依赖项。同时也会继续递归每个依赖项，收集依赖项的依赖项信息，不断递归下去；")]),e._v(" "),_("li",[e._v("最终会得到一颗依赖树")])])]),e._v(" "),_("li",[e._v("最后调用"),_("code",[e._v("compilation.seal")]),e._v(" render 模块，整合各个依赖项，最后输出一个或多个chunk；")])]),e._v(" "),_("h1",{attrs:{id:"插件"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#插件"}},[e._v("#")]),e._v(" 插件")]),e._v(" "),_("p",[e._v("DefinePlugin")]),e._v(" "),_("blockquote",[_("p",[e._v("https://webpack.js.org/plugins/define-plugin/")])]),e._v(" "),_("p",[e._v("DefinePlugin允许您创建可以在编译时配置的全局常量。这对于在开发版本和生产版本之间允许不同的行为很有用。如果在开发版本中而不是生产版本中执行日志记录，则可以使用全局常量来确定是否进行日志记录。那就是DefinePlugin发光的地方，进行设置并忘记它的开发和生产构建规则")])])}),[],!1,null,null,null);v.default=c.exports}}]);