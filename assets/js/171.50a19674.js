(window.webpackJsonp=window.webpackJsonp||[]).push([[171],{534:function(e,c,t){"use strict";t.r(c);var n=t(45),a=Object(n.a)({},(function(){var e=this,c=e.$createElement,t=e._self._c||c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"事件循环"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#事件循环"}},[e._v("#")]),e._v(" 事件循环")]),e._v(" "),t("blockquote",[t("p",[e._v("https://juejin.im/post/5dd24ecce51d453fb903ff37")])]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("   ┌───────────────────────┐\n┌─>│        timers         │\n│  └──────────┬────────────┘\n│  ┌──────────┴────────────┐\n│  │     I/O callbacks     │\n│  └──────────┬────────────┘\n│  ┌──────────┴────────────┐\n│  │     idle, prepare     │\n│  └──────────┬────────────┘      ┌───────────────┐\n│  ┌──────────┴────────────┐      │   incoming:   │\n│  │         poll          │<─────┤  connections, │\n│  └──────────┬────────────┘      │   data, etc.  │\n│  ┌──────────┴────────────┐      └───────────────┘\n│  │        check          │\n│  └──────────┬────────────┘\n│  ┌──────────┴────────────┐\n└──┤    close callbacks    │\n   └───────────────────────┘\n\n")])])]),t("p",[e._v("\\1. "),t("strong",[t("code",[e._v("timers")]),e._v(" 阶段")]),e._v(": 这个阶段执行 "),t("code",[e._v("setTimeout(callback)")]),e._v(" 和 "),t("code",[e._v("setInterval(callback)")]),e._v(" 预定的 callback;")]),e._v(" "),t("p",[e._v("\\2. "),t("strong",[t("code",[e._v("I/O callbacks")]),e._v(" 阶段")]),e._v(": 此阶段执行某些系统操作的回调，例如TCP错误的类型。 例如，如果TCP套接字在尝试连接时收到 ECONNREFUSED，则某些* nix系统希望等待报告错误。 这将操作将等待在==I/O回调阶段==执行;")]),e._v(" "),t("p",[e._v("\\3. "),t("strong",[t("code",[e._v("idle, prepare")]),e._v(" 阶段")]),e._v(": 仅node内部使用;")]),e._v(" "),t("p",[e._v("\\4. "),t("strong",[t("code",[e._v("poll")]),e._v(" 阶段")]),e._v(": 获取新的I/O事件, 例如操作读取文件等等，适当的条件下node将阻塞在这里;")]),e._v(" "),t("p",[e._v("\\5. "),t("strong",[t("code",[e._v("check")]),e._v(" 阶段")]),e._v(": 执行 "),t("code",[e._v("setImmediate()")]),e._v(" 设定的callbacks;")]),e._v(" "),t("p",[e._v("\\6. "),t("strong",[t("code",[e._v("close callbacks")]),e._v(" 阶段")]),e._v(": 比如 "),t("code",[e._v("socket.on(‘close’, callback)")]),e._v(" 的callback会在这个阶段执行;")])])}),[],!1,null,null,null);c.default=a.exports}}]);