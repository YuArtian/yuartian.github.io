(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{380:function(t,a,o){"use strict";o.r(a);var s=o(45),e=Object(s.a)({},(function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[o("h1",{attrs:{id:"node调用java-rpc"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#node调用java-rpc"}},[t._v("#")]),t._v(" Node调用Java RPC")]),t._v(" "),o("h2",{attrs:{id:"跨语言调用"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#跨语言调用"}},[t._v("#")]),t._v(" 跨语言调用")]),t._v(" "),o("p",[t._v("解决跨语言调用的思路无非是两种：")]),t._v(" "),o("ul",[o("li",[t._v("寻找一个通用的协议")]),t._v(" "),o("li",[t._v("使用 agent 完成协议的适配")])]),t._v(" "),o("p",[t._v("目前业界经常被提及的解决方案有如下几种，不妨拿出来老生常谈一番：")]),t._v(" "),o("ul",[o("li",[o("p",[t._v("spring cloud。spring cloud 提供了一整套微服务开发组件，它主要面向 java 开发，但由于其使用的协议是基于 restful 风格的 http 协议，这使得其天然具备跨语言能力，异构语言只需要提供 http 客户端，便可以实现跨语言调用。")])]),t._v(" "),o("li",[o("p",[t._v("service mesh。号称下一代微服务框架的 service mesh，其解决跨语言问题的核心在于 SideCar ，SideCar 在 service mesh 的发展过程中概念不断的迁移，但本质都是完成了一件事：处理服务间通信，负责实现请求的可靠传递。")])]),t._v(" "),o("li",[o("p",[t._v("motan。"),o("a",{attrs:{href:"https://github.com/weibocom/motan",target:"_blank",rel:"noopener noreferrer"}},[t._v("motan"),o("OutboundLink")],1),t._v(" 是新浪微博开源的一款跨语言服务治理框架，在其早期版本中仅支持 motan-java，随着版本演进，在目前最新版本(1.1.0)中，提供了 motan-go，motan-php，motan-openresty 等跨语言特性。类似于 service mesh 中的 SideCar，motan 借助于 motan-go 作为 agent 完成协议的转发，并且依赖于定制协议：motan2，实现跨语言调用。")])])]),t._v(" "),o("h1",{attrs:{id:"node通过dubbo2-js调用java-dubbo服务-rpc"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#node通过dubbo2-js调用java-dubbo服务-rpc"}},[t._v("#")]),t._v(" Node通过dubbo2.js调用java dubbo服务(rpc)")]),t._v(" "),o("blockquote",[o("p",[t._v("https://github.com/apache/dubbo-js")]),t._v(" "),o("p",[t._v("https://github.com/node-modules/hessian.js")]),t._v(" "),o("p",[t._v("https://github.com/node-modules/js-to-java")])]),t._v(" "),o("blockquote",[o("p",[t._v("https://juejin.cn/post/6882184522159849485")]),t._v(" "),o("p",[t._v("https://dubbo.apache.org/zh/docs/")]),t._v(" "),o("p",[t._v("https://juejin.cn/post/6844903811815849992")]),t._v(" "),o("p",[t._v("https://dubbo.apache.org/zh/blog/2018/08/14/%E4%BB%8E%E8%B7%A8%E8%AF%AD%E8%A8%80%E8%B0%83%E7%94%A8%E5%88%B0dubbo2.js/")])]),t._v(" "),o("h4",{attrs:{id:"dubbo协议报文格式"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#dubbo协议报文格式"}},[t._v("#")]),t._v(" Dubbo协议报文格式")]),t._v(" "),o("p",[o("img",{attrs:{src:"https://dubbo.apache.org/imgs/blog/dubbo-protocol.png",alt:"dubbo协议"}})]),t._v(" "),o("p",[t._v("协议报文最终都会变成字节，使用 tcp 传输，任何语言只要支持网络模块，有类似 Socket 之类的封装，那么通信就不成问题。那，跨语言难在哪儿？以其他语言调用 java 来说，主要有两个难点：")]),t._v(" "),o("ol",[o("li",[t._v("异构语言如何表示 java 中的数据类型，特别是动态语言，可能不存在严格的数据类型")]),t._v(" "),o("li",[t._v("序列化方案如何做到跨语言")])]),t._v(" "),o("h4",{attrs:{id:"dubbo2-js解决方案"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#dubbo2-js解决方案"}},[t._v("#")]),t._v(" dubbo2.js解决方案")]),t._v(" "),o("p",[t._v("上面我们分析出了两个难点，dubbo2.js 解决这两个问题的关键依赖于两个类库："),o("a",{attrs:{href:"https://github.com/node-modules/js-to-java",target:"_blank",rel:"noopener noreferrer"}},[t._v("js-to-java"),o("OutboundLink")],1),t._v("，"),o("a",{attrs:{href:"https://github.com/node-modules/hessian.js",target:"_blank",rel:"noopener noreferrer"}},[t._v("hessian.js"),o("OutboundLink")],1)]),t._v(" "),o("ul",[o("li",[o("p",[t._v("js-to-java 使得 nodejs 具备 java 对象的表达能力")])]),t._v(" "),o("li",[o("p",[t._v("hessian.js 提供了序列化能力")])]),t._v(" "),o("li",[o("p",[t._v("借助于 nodejs 的 socket ，复制一套 dubbo 协议的报文格式")])])]),t._v(" "),o("p",[t._v("最终便实现了 nodejs 对 java-dubbo-provider 的调用")]),t._v(" "),o("h3",{attrs:{id:"快速入门"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#快速入门"}},[t._v("#")]),t._v(" 快速入门")]),t._v(" "),o("blockquote",[o("p",[t._v("https://dubbo.apache.org/zh/blog/2018/08/14/%E4%BB%8E%E8%B7%A8%E8%AF%AD%E8%A8%80%E8%B0%83%E7%94%A8%E5%88%B0dubbo2.js/#dubbo2js%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8")])]),t._v(" "),o("h3",{attrs:{id:"dubbo2-js特性"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#dubbo2-js特性"}},[t._v("#")]),t._v(" dubbo2.js特性")]),t._v(" "),o("ul",[o("li",[t._v("支持 zookeeper 注册中心")]),t._v(" "),o("li",[t._v("支持原生 dubbo 协议")]),t._v(" "),o("li",[t._v("支持服务直连")]),t._v(" "),o("li",[t._v("全链路跟踪")]),t._v(" "),o("li",[t._v("dubbo 接口自动生成")])]),t._v(" "),o("h3",{attrs:{id:"和-eggjs-结合"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#和-eggjs-结合"}},[t._v("#")]),t._v(" 和 Eggjs 结合")]),t._v(" "),o("blockquote",[o("p",[t._v("https://www.jianshu.com/p/9a4745bb9564")])])])}),[],!1,null,null,null);a.default=e.exports}}]);